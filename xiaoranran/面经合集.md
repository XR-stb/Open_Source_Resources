# 面经合集

### 1. 为什么有了二叉平衡树（AVL）还要红黑树(RBT)（腾讯）

二叉平衡树是为了解决二叉搜索树退化成一条链而诞生的。

特点是：每个节点的左右子树高度差至多等于1，所以查找的平均复杂度的为$$log(n)$$

所以这个严格的规则导致了每次插入我们都需要进行左旋、右旋操作来进行调整。

​	一颗红黑树是满足下面性质的二叉搜索树：

- 根节点和所有叶子节点（NIL）为黑色

- 任意相邻节点的不能同时为**红色**

- 红色节点的两个子节点都是黑色

- 每个节点到其所有后代叶子节点的简单路径上，均包含相同数目的黑色节点。

  如下图（来自极客时间）

![image](https://user-images.githubusercontent.com/56108982/201018168-e64ba2ff-9db0-43f6-b260-8394d8d83ffa.png)

正是由于这些特性，使得红黑树不用像AVL那样，频繁进行调整，保证了所有动态操作的时间复杂度为$$2*log(n)$$

所以，红黑树在插入，删除等操作的性能会比AVL树要好一些，而只是查找速度的话，AVL树是要比红黑树快的。

### 2. MySQL索引存储结构有了解过吗？

以下几种数据结构常被用于MySQL的索引结构：

- 二叉搜索树：优点：查询速度较快，缺点：容易退化成链
- Hash：优点：查询效率很高，缺点：不适合范围查询和模糊查询
- 红黑树：优点：继承了二叉搜索树的特点，且会通过左右旋来调整树的高度，缺点：数据量过大时，深度过高，查询效率不如二叉搜索树
- B-树：优点：弥补了红黑树在数据量过大时深度过深的问题，同样的层数下存储着更多的数据，缺点：只适合单条数据的查询，不适用于范围查询（因为每次都会从根节点进行查询）
- B+树（MySQL目前在用）优点：在B-树的基础上进行了改进，只用叶子节点存储数据（叶子节点数据有序）（类似线段树的那种感觉），非叶子节点只存放索引信息，可以更高效的进行范围查询，缺点：插入数据时会调整整棵树的结构，会阻塞读写操作

### 3.Redis的使用场景

- 热点数据的缓存
  - 由于redis是基于内存的，所以查询速度非常快，非常适合用于热点数据的存储，减轻MySQL的压力
- 限时业务的使用
  - 我们可以通过使用expire命令：EXPIRE key seconds，给一个键设置生存时间，常用于验证码，优惠券等场景
- 排行榜
  - 传统的关系型数据库在进行排序查询操作普遍比较慢，而redis丰富的数据结构之一：SortedSet则可以轻松让我们对热点的数据进行排序。比如排行榜等场景
- 订单处理
  - redis内置的list支持队列的操作，让我们能够将用户的下单信息按FIFO的顺序存储起来

### 4.Redis为什么是单线程

因为Redis是基于内存的，最可能影响Redis的可能是内存或网络，而不是CPU，且单线程更易于实现，更加稳定，调试更加容易，同时减少了各种锁和线程切换的消耗
